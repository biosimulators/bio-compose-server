FROM ghcr.io/biosimulators/bio-compose-server-base:0.0.1-dev

# redundant line to ensure latest gateway content; comment out if you don't want this
# UN rm -rf /bio-compose-server/shared \
#    && rm -rf /bio-compose-server/gateway
# OPY ./shared /bio-compose-server/shared
# OPY ./gateway /bio-compose-server/gateway
RUN conda run -n server pip install python-libsbml

WORKDIR /bio-compose-server/gateway

ENTRYPOINT ["/entrypoint.sh"]

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "3001", "--reload"]
